# Learning Go - 目錄

## 前言 ................................................................ xiii

## 第一章 設定你的 Go 環境 .................................................. 1
- 安裝 Go 工具 ......................................................... 1
- Go 工作區 ........................................................... 2
- go 命令 ............................................................. 3
  - go run 與 go build ................................................ 3
  - 取得第三方的 Go 工具 .............................................. 5
  - 格式化你的程式碼 ................................................. 6
- Linting 與 Vetting .................................................. 8
- 選擇你的工具 ........................................................ 9
  - Visual Studio Code ............................................... 9
  - GoLand .......................................................... 11
  - The Go Playground ............................................... 12
- Makefiles .......................................................... 14
- 維持最新版本 ....................................................... 15
- 總結 .............................................................. 16

## 第二章 基本型態與宣告 .................................................. 17
- 內建的型態 ......................................................... 17
- 零值 .............................................................. 17
- 常值 .............................................................. 18
- 布林 .............................................................. 19
- 數字型態 ........................................................... 20
- 容許字中的 uint ................................................... 26
- 明確型態轉換 ....................................................... 26
- var vs. := ........................................................ 27
- 使用 const ......................................................... 31
- 已定型態與未定型態的常數 ............................................ 32
- 未使用的變數 ....................................................... 33
- 為變數和常數命名 ................................................... 34
- 總結 .............................................................. 35

## 第三章 複合型態 ....................................................... 35
- 陣列—很難直接使用 .................................................. 35
- slice ............................................................. 37
  - len ............................................................. 39
  - append .......................................................... 41
  - 容量 ............................................................ 42
  - make ............................................................ 46
  - 宣告 slice ...................................................... 46
  - 切割 slice ...................................................... 48
  - 將陣列轉換成 slice .............................................. 51
  - copy ............................................................ 53
- 字串與 rune 與 byte ................................................ 54
- map ............................................................... 55
  - 讀取和寫入 map .................................................. 57
  - 逗號 ok 寫法 .................................................... 59
  - 刪除 map 內容 ................................................... 59
  - 將 map 當成 set 來使用 ........................................... 61
- struct ............................................................ 62
  - 匿名 struct ..................................................... 63
  - 比較與轉換 struct ............................................... 64
- 總結 .............................................................. 66

## 第四章 區塊、遮蔽與控制結構 ............................................ 66
- 區塊 .............................................................. 66
- 遮蔽變數 ........................................................... 67
- if ................................................................ 67
- 四種 for .......................................................... 69
  - 完整的 for 陳述式 ............................................... 69
  - 只有條件式的 for 陳述式 .......................................... 69
  - 無窮的 for 陳述式 ............................................... 70
- break 與 continue ................................................. 71
- for-range 陳述式 .................................................. 72
- 標記 for 陳述式 ................................................... 77
- 選擇正確的 for 陳述式 ............................................. 78
- switch ............................................................ 80
  - 空 switch ....................................................... 83
  - 在 if 與 switch 之間做選擇 ....................................... 84
- goto—沒錯，正是 goto .............................................. 85
- 總結 .............................................................. 87

## 第五章 函式 .......................................................... 89
- 宣告與呼叫函式 ..................................................... 90
- 傳回具名回傳值 ..................................................... 91
- 數量不定的輸入參數與 slice ......................................... 92
- 多個回傳值 ......................................................... 93
- 多個回傳值就是多個值 ............................................... 93
- 忽略回傳值 ......................................................... 94
- 具名回傳值 ......................................................... 95
- 空回傳：絕對不要使用它！ ........................................... 96
- 函式是值 ........................................................... 98
- 函式型態宣告 ....................................................... 99
- 匿名函式 .......................................................... 100
- closure .......................................................... 101
- 將函式當成參數來傳遞 .............................................. 102
- 從函式回傳函式 .................................................... 106
- defer ............................................................ 108
- Go 是以值呼叫的 ................................................... 110
- 總結 ............................................................. 112

## 第六章 指標 ........................................................ 113
- 快速指標入門 ...................................................... 113
- 不要害怕指標 ...................................................... 115
- 指標表示變數 ...................................................... 116
- new .............................................................. 117
- 指標是傳址 ........................................................ 118
- 指標參數的效能 .................................................... 119
- 零值與無值 ........................................................ 120
- slice 與 map 的差異 ............................................... 121
- slice 當成緩衝區 .................................................. 122
- 減少垃圾回收器的壓力 .............................................. 123
- 總結 ............................................................. 124

## 第七章 型態、方法與介面 ............................................ 125
- Go 中的型態 ....................................................... 125
- 方法 ............................................................. 126
- 指標接收器與值接收器 .............................................. 128
- 程式碼重用與嵌入 .................................................. 130
- 嵌入不是繼承 ...................................................... 132
- 快速課程：介面與 nil .............................................. 133
- 介面與 nil ....................................................... 134
- 空介面什麼都不說 .................................................. 135
- 型態斷言與型態切換 ................................................ 136
- 使用型態斷言與型態切換 ............................................ 138
- 函式型態是橋樑 .................................................... 140
- 隱含介面讓相依性反轉 .............................................. 141
- 介面與測試 ........................................................ 143
- 使用 embed 來模擬 ................................................. 144
- 只接受你需要的介面 ................................................ 145
- 介面是型態安全的鴨子型態 .......................................... 146
- Go 不是特別物件導向的 ............................................. 147
- 總結 ............................................................. 148

## 第八章 錯誤 ........................................................ 149
- 如何處理錯誤：基礎 ................................................ 149
- 使用字串來建立錯誤 ................................................ 151
- Sentinel 錯誤 ..................................................... 152
- 錯誤是值 ......................................................... 154
- 包裝錯誤 ......................................................... 155
- Is 與 As ......................................................... 157
- 包裝錯誤與 Sentinel 錯誤 .......................................... 159
- panic 與 recover ................................................. 160
- 取得堆疊追蹤 ...................................................... 162
- 總結 ............................................................. 163

## 第九章 模組與套件 .................................................. 165
- 儲存庫、模組與套件 ................................................ 165
- go.mod ........................................................... 166
- 建立模組 ......................................................... 168
- 新增相依性 ........................................................ 169
- 使用套件 ......................................................... 170
- 匯入與匯出 ........................................................ 171
- 建立與存取套件 .................................................... 172
- 命名套件 ......................................................... 174
- 如何組織你的模組 .................................................. 175
- 覆寫相依性 ........................................................ 176
- 發佈你的模組 ...................................................... 178
- 版本化你的模組 .................................................... 179
- 模組代理伺服器 .................................................... 181
- 私有儲存庫 ........................................................ 182
- 總結 ............................................................. 183

## 第十章 標準函式庫 .................................................. 185
- io 與朋友們 ....................................................... 185
- time ............................................................. 188
- encoding/json .................................................... 191
- net/http ......................................................... 194
- 總結 ............................................................. 197

## 第十一章 context .................................................. 199
- 什麼是 context ................................................... 199
- 值 ............................................................... 201
- 取消 ............................................................. 202
- 逾時 ............................................................. 204
- 處理 context 取消在你自己的程式碼中 ................................. 205
- 總結 ............................................................. 207

## 第十二章 標準函式庫中的測試 ........................................ 209
- 測試的基礎 ........................................................ 209
- 報告測試失敗 ...................................................... 211
- 設定與拆解 ........................................................ 212
- 儲存樣本資料 ...................................................... 214
- 快取測試結果 ...................................................... 215
- 測試你的公開 API .................................................. 216
- 使用 go-cmp 來比較測試結果 ......................................... 217
- 表格驅動測試 ...................................................... 218
- 檢查你的程式碼涵蓋率 .............................................. 220
- 基準測試 ......................................................... 221
- 剖析你的程式碼 .................................................... 223
- 總結 ............................................................. 224

## 第十三章 反射、Unsafe 與 Cgo ....................................... 225
- 反射讓你在執行期使用型態 .......................................... 225
- reflection 可讓我們在執行期使用型態 ................................. 226
- Type、Kind 與 Value .............................................. 227
- 製作新值 ......................................................... 228
- 使用 reflection 來檢查介面的值是不是 nil ........................... 229
- 使用 reflection 來編寫資料 marshaler ............................... 230
- 使用 reflection 來建構函式，將重複性的工作自動化 ................... 231
- 雖然你可以用 reflection 來建構 struct，但不要這樣 ................. 232
- reflection 無法製作方法 ........................................... 233
- 值得使用 reflection 嗎？才使用它 .................................. 234
- unsafe 是不安全的 ................................................. 235
- 使用 unsafe 來轉換外部的二進制資料 .................................. 236
- unsafe 字串與 slice .............................................. 237
- unsafe 工具 ...................................................... 238
- cgo 讓你來整合的，不是用來提升性能的 ................................ 239
- 總結 ............................................................. 240

## 第十四章 預見未來：Go 的泛型 ....................................... 241
- 泛型可減少重複的程式，並增加型態安全性 ............................. 241
- 簡介 Go 的泛型 ................................................... 242
- 使用型態串列來指定運算子 .......................................... 243
- 泛型函式抽象演算法 ................................................ 244
- 用型態串列限制方法 ................................................ 245
- 選擇 ............................................................. 246
- 這地的 Go 與沒有 .................................................. 247
- 將來會解鎖的功能 .................................................. 248
- 總結 ............................................................. 249

## 索引 .............................................................. 251